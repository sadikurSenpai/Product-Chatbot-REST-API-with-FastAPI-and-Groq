# Product Chatbot REST API with FastAPI and Groq

This project implements a fully functional **RAG-style (Retrieval-Augmented Generation)** Chatbot REST API using **FastAPI**.
It intelligently interacts with customers — answering questions about product details by combining live data from the **DummyJSON Products API** with natural, human-like responses generated by **Groq LLM (LLaMA 3.1)**.

---

## Features

* **RESTful Design** – Clean, modular API structure with dedicated routers and service layers.
* **FastAPI** – High-performance Python web framework with automatic interactive documentation.
* **Groq Integration** – Uses Groq’s low-latency LLM API (`llama-3.1-8b-instant`) for intent extraction and contextual response generation.
* **RAG Logic** – Combines retrieval and generation for grounded, factual answers.
*  **Scalable Architecture** – Clear separation of concerns via `ProductService`, `NLPService`, and `ResponseService`.

---

---

## Project Structure

```
fastapi_chatbot/
│
├── app/
│   ├── __init__.py
│   ├── main.py                 # FastAPI app instantiation, routing
│   ├── config.py               # API keys, environment variables
│   │
│   ├── models/
│   │   ├── __init__.py
│   │   ├── product.py          # Pydantic model for product
│   │   └── chat.py             # Pydantic model for chat requests/responses
│   │
│   ├── services/
│   │   ├── __init__.py
│   │   ├── product_service.py  # Fetch products from DummyJSON
│   │   ├── nlp_service.py      # Groq model integration, intent understanding
│   │   └── response_service.py # Build human-like responses
│   │
│   ├── routers/
│       ├── __init__.py
│       ├── products.py         # /api/products endpoints
│       └── chat.py             # /api/chat endpoint
│
├── requirements.txt
├── .env                        # API keys, config
└── README.md

```

---

## RAG Workflow

1. **Intent Extraction** – The LLM identifies the user's goal (e.g., price query, rating filter) and relevant entities (like product names).
2. **Data Retrieval** – Product facts are fetched from the DummyJSON API.
3. **Response Generation** – Facts + user query → fed into Groq LLM → natural human-like response.

---

## Getting Started

Follow these steps to set up and run the project locally.

### Prerequisites

* Python **3.10+**
* Groq API Key (from [Groq Console](https://console.groq.com))
* Dependencies: `httpx`, `uvicorn`, `python-dotenv`

---

### 1️⃣ Clone the Repository

```bash
git clone <repository_url>
cd fastapi_chatbot
```

### 2️⃣ Setup Virtual Environment and Install Dependencies

```bash
# Create and activate virtual environment
python -m venv venv
source venv/bin/activate        # macOS/Linux
venv\Scripts\activate           # Windows

# Install dependencies
pip install -r requirements.txt
```

### 3️⃣ Configure Environment Variables

Create a `.env` file in the project root and add your configuration:

```bash
# .env
DUMMYJSON_BASE_URL=https://dummyjson.com
GROQ_API_KEY=gsk_YOUR_ACTUAL_GROQ_API_KEY
GROQ_API_URL=https://api.groq.com/openai/v1
```

> ⚠️ **Note:** Never commit `.env` or expose real API keys publicly.

---

### 4️⃣ Run the Application

```bash
uvicorn app.main:app --reload
```

Now open your browser and visit:
**[http://127.0.0.1:8000](http://127.0.0.1:8000)**

---

## API Endpoints

Explore interactively using **Swagger UI** → [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

| Method   | Endpoint         | Description                                            |
| -------- | ---------------- | ------------------------------------------------------ |
| **GET**  | `/api/products/` | Fetch all available products from DummyJSON            |
| **POST** | `/api/chat/`     | Accept a user message and return a human-like response |

---

### Example Usage — Chat Endpoint

**POST** `/api/chat`

#### Request

```json
{
  "message": "What is the price and rating of the iPhone 9?"
}
```

#### Response

```json
{
  "response": "The iPhone 9 is priced at $549 and has an excellent customer rating of 4.69. It's currently in stock with a 1-year warranty. You can place your order now!"
}
```

---

## Supported Intents

| Intent             | Example Query                     | Behavior                          |
| ------------------ | --------------------------------- | --------------------------------- |
| **Price Query**    | “What’s the price of Kiwi?”       | Returns price info                |
| **Availability**   | “Do you have any electronics?”    | Lists available items             |
| **Rating Filter**  | “Show me products rated above 4.” | Filters by rating                 |
| **Review Request** | “Tell me the reviews for iPhone.” | Summarizes reviews                |
| **Category Query** | “Show me fragrances.”             | Returns category-specific results |

---

## Testing

Test endpoints using:

* **Swagger UI** → `/docs`
* **Postman** or **cURL**

Example:

```bash
curl -X POST http://127.0.0.1:8000/api/chat/ \
  -H "Content-Type: application/json" \
  -d '{"message": "Do you have any electronics?"}'
```

---

## Tech Stack

| Component             | Technology                                               |
| --------------------- | -------------------------------------------------------- |
| **Backend Framework** | FastAPI                                                  |
| **AI Model**          | Groq LLaMA 3.1 (8B / 70B)                                |
| **Data Source**       | [DummyJSON Products API](https://dummyjson.com/products) |
| **HTTP Client**       | HTTPX                                                    |
| **Server**            | Uvicorn                                                  |
| **Language**          | Python 3.10+                                             |

---

## Security Notes

* Keep `.env` private (never commit API keys).
* Validate and sanitize all inputs.
* Use HTTPS and authentication in production.
* Add rate limiting for API protection.

---

## Future Improvements

*  Add caching (Redis or local TTL).
*  Improve intent classification using embeddings.
*  Add unit tests (`pytest`, `httpx` test client).
*  Extend to recommendation and product comparison features.
